define(["THREE"],function(e){e.OBJLoader=function(t){this.manager=t!==undefined?t:e.DefaultLoadingManager},e.OBJLoader.prototype={constructor:e.OBJLoader,load:function(t,n,r,i){var s=this,o=new e.XHRLoader(s.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(e){n(s.parse(e))},r,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(t){function o(e){var t=parseInt(e);return(t>=0?t-1:t+d.length/3)*3}function u(e){var t=parseInt(e);return(t>=0?t-1:t+v.length/3)*3}function a(e){var t=parseInt(e);return(t>=0?t-1:t+m.length/2)*2}function f(e,t,n){i.vertices.push(d[e],d[e+1],d[e+2],d[t],d[t+1],d[t+2],d[n],d[n+1],d[n+2])}function l(e,t,n){i.normals.push(v[e],v[e+1],v[e+2],v[t],v[t+1],v[t+2],v[n],v[n+1],v[n+2])}function c(e,t,n){i.uvs.push(m[e],m[e+1],m[t],m[t+1],m[n],m[n+1])}function h(e){if(typeof e!="string"){var t=new Uint8Array(e),n="";for(var r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n}return e}function p(e,t,n,r,i,s,h,p,d,v,m,g){var y=o(e),b=o(t),w=o(n),E;r===undefined?f(y,b,w):(E=o(r),f(y,b,E),f(b,w,E)),i!==undefined&&(y=a(i),b=a(s),w=a(h),r===undefined?c(y,b,w):(E=a(p),c(y,b,E),c(b,w,E))),d!==undefined&&(y=u(d),b=u(v),w=u(m),r===undefined?l(y,b,w):(E=u(g),l(y,b,E),l(b,w,E)))}console.time("OBJLoader");var n,r=[],i,s;/^o /gm.test(t)===!1&&(i={vertices:[],normals:[],uvs:[]},s={name:""},n={name:"",geometry:i,material:s},r.push(n));var d=[],v=[],m=[],g=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,w=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,E=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,S=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,x=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,T=h(t),N=T.split("\n");for(var C=0;C<N.length;C++){var k=N[C];k=k.trim();var L;if(k.length===0||k.charAt(0)==="#")continue;(L=g.exec(k))!==null?d.push(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])):(L=y.exec(k))!==null?v.push(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])):(L=b.exec(k))!==null?m.push(parseFloat(L[1]),parseFloat(L[2])):(L=w.exec(k))!==null?p(L[1],L[2],L[3],L[4]):(L=E.exec(k))!==null?p(L[2],L[5],L[8],L[11],L[3],L[6],L[9],L[12]):(L=S.exec(k))!==null?p(L[2],L[6],L[10],L[14],L[3],L[7],L[11],L[15],L[4],L[8],L[12],L[16]):(L=x.exec(k))!==null?p(L[2],L[5],L[8],L[11],undefined,undefined,undefined,undefined,L[3],L[6],L[9],L[12]):/^o /.test(k)?(i={vertices:[],normals:[],uvs:[]},s={name:""},n={name:k.substring(2).trim(),geometry:i,material:s},r.push(n)):/^g /.test(k)||(/^usemtl /.test(k)?s.name=k.substring(7).trim():/^mtllib /.test(k)||/^s /.test(k))}var A=null;for(var C=0,O=r.length;C<O;C++)n=r[C],i=n.geometry,A=new e.BufferGeometry,A.addAttribute("position",new e.BufferAttribute(new Float32Array(i.vertices),3)),i.normals.length>0&&A.addAttribute("normal",new e.BufferAttribute(new Float32Array(i.normals),3)),i.uvs.length>0&&A.addAttribute("uv",new e.BufferAttribute(new Float32Array(i.uvs),2)),A.computeFaceNormals(),A.computeVertexNormals();return console.timeEnd("OBJLoader"),A}}});