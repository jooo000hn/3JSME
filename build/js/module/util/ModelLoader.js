define(["require","exports","module","lib/CommonUtil","THREE","thirdLib/threejs/STLLoader","thirdLib/threejs/OBJLoader"],function(e,t){"use strict";function u(){i=new r.STLLoader}function a(){s=new r.OBJLoader}function f(e,t){if(!window.File||!window.FileReader||!window.FileList||!window.Blob){console.error("File APIs are not supported");return}if(!n.isDefined(e))return;v()||d();var r=e[0],u=r.name.search(/\\*.stl/i),a=r.name.search(/\\*.obj/i);if(o===a&&a===u)return;var f=o===a?i:s,l=new FileReader;l.onload=function(e){var n=e.target.result;t(f.parse(n))},l.readAsArrayBuffer(r)}function l(e,t){v()||d();var n=e;h(n,e,t)}function c(e,t,n){v()||d(),h(e,t,n)}function h(e,t,n){var r=e.search(/\\*.stl/i),u=e.search(/\\*.obj/i);if(o===u&&u===r)return;var a=o===u?i:s;a.load(t,n)}function p(e,t){n.isDefined(i)||u();var r=i;t(r.parse(e))}function d(){a(),u()}function v(){return n.isDefined(i)&&n.isDefined(s)}var n=e("lib/CommonUtil"),r=e("THREE");e("thirdLib/threejs/STLLoader"),e("thirdLib/threejs/OBJLoader");var i=null,s=null,o=-1;t.loadStl=p,t.loadLocalFiles=f,t.loadServerUrl=l,t.loadServerUrlHash=c});